/* Layout */
html, body { height:100%; margin:0; font-family:"Inter",system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol",sans-serif; }
.chat-pane { position:relative; width:50vw; height:100vh; overflow-y:auto; padding:12px; box-sizing:border-box; padding-bottom:110px; }
#map-frame { position:fixed; top:0; right:0; width:50vw; height:100vh; border:1px solid #ccc; z-index:1000; }

/* Chat container */
#output { white-space:pre-wrap; margin-top:1rem; padding-right:8px; box-sizing:border-box; }
.chat-output { display:flex; flex-direction:column; gap:10px; margin-top:1rem; padding-right:8px; }

/* Message bubbles */
.msg { max-width:86%; padding:10px 12px; border-radius:14px; line-height:1.35; white-space:pre-wrap; }
.msg.user { align-self:flex-end; background:#FFF3EC; color:#111; border:1px solid #F8C9B3; }
.msg.bot { align-self:flex-start; background:transparent; border:none; }

/* Chat input (composer) */
.composer { position:fixed; left:0; bottom:16px; width:50vw; display:flex; justify-content:center; padding:0 12px; box-sizing:border-box; z-index:1001; }
.input-wrap { position:relative; left:-48px; width:clamp(320px,70%,640px); }
.input-wrap input { width:100%; height:48px; padding:0 96px 0 16px; border:1px solid #e5e7eb; border-radius:999px; outline:none; font-size:14px; font-family:inherit; background:#fff; box-shadow:0 1px 2px rgba(0,0,0,.04),0 0 0 4px rgba(0,0,0,0); transition:box-shadow .2s ease,border-color .2s ease; }
.input-wrap input:focus { border-color:#FD6A2B; box-shadow:0 1px 2px rgba(0,0,0,.04),0 0 0 4px rgba(252,82,0,.18); }

/* Buttons inside composer */
#send-btn,#mic-btn { position:absolute; top:50%; transform:translateY(-50%); height:36px; width:36px; border-radius:999px; border:1px solid transparent; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; color:#fff; background:#FC5200; }
#send-btn { right:-96px; }
#mic-btn { right:-54px; color:#FC5200; background:#fff; border-color:#F8C9B3; }
#mic-btn:hover { border-color:#FD6A2B; }
#send-btn:disabled { opacity:.4; cursor:default; }

/* Mic recording pulse */
@keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(252,82,0,.45); } 70%  { box-shadow: 0 0 0 10px rgba(252,82,0,0); } 100% { box-shadow: 0 0 0 0 rgba(252,82,0,0); }}
#mic-btn.pulsing { animation: pulse 1.1s ease-out infinite; border-color: #FD6A2B;}

/* Suggestion buttons (shown before chatting) */
.suggestions { display:none; min-height:calc(100vh - 180px); place-content:center; gap:16px; text-align:center; }
.suggestions.show { display:grid; }
.suggestions .row { display:flex; justify-content:center; gap:16px; }
.sugg { display:inline-flex; align-items:center; justify-content:center; gap:10px; padding:16px 18px; border-radius:14px; background:#FFF6F1; border:1px solid #F8C9B3; color:#111; font-size:14px; line-height:1.2; box-shadow:0 2px 6px rgba(0,0,0,.06); cursor:pointer; width:max-content; max-width:none; white-space:nowrap; margin-inline:auto; }
.sugg svg { color:#FC5200; }
.sugg:hover { border-color:#FD6A2B; box-shadow:0 6px 18px rgba(0,0,0,.08); }
.sugg.top { justify-self:center; margin-bottom:4px; }

/* Activity group containers */
.activity-group { display:grid; gap:10px; margin-top:6px; }
.activity-toggle { margin:8px 0 2px; border:1px solid #e6e6e6; background:#fafafa; padding:8px 12px; border-radius:10px; font-weight:600; cursor:pointer; transition:background .15s ease,border-color .15s ease,transform .05s ease; }
.activity-toggle:hover { background:#f2f2f2; border-color:#ddd; }
.activity-toggle:active { transform:translateY(1px); }
.hidden { display:none !important; }

/* Activity card (route info) */
.activity-box { display:grid; grid-template-columns:96px 1fr; gap:16px; align-items:center; padding:12px 14px; border:1px solid #e6e6e6; border-radius:12px; background:#fff; transition:box-shadow .15s ease,border-color .15s ease,background-color .15s ease,transform .05s ease; cursor:pointer; }
.activity-box:not(.selected):hover { border-color:#FC5200; background:rgba(252,82,0,.04); box-shadow:0 1px 8px rgba(0,0,0,.06); }
.activity-box:active { transform:translateY(1px); }

/* Date block on activity card */
.act-date { display:flex; flex-direction:column; align-items:flex-start; justify-content:center; line-height:1; }
.act-date-top { font-size:20px; font-weight:700; letter-spacing:.2px; }
.act-date-bot { margin-top:6px; font-size:14px; color:#666; font-weight:600; }

/* Metrics and icons on activity cards */
.act-right { display:flex; align-items:center; justify-content:space-between; gap:12px; width:100%; }
.act-metrics { display:flex; align-items:center; gap:20px; flex-wrap:wrap; }
.metric { display:flex; flex-direction:column; align-items:center; gap:6px; min-width:72px; }
.metric-icon { width:20px; height:20px; opacity:.9; }
.metric-val { font-size:14px; font-weight:600; }

/* Activity analysis text (only visible when expanded) */
.act-analysis { grid-column:1 / -1; display:none; margin-top:10px; padding-top:10px; border-top:1px dashed #ebebeb; color:#222; line-height:1.45; }
.activity-box.selected .act-analysis { display:block; }

/* Analyze button styling */
.analyze-icon { border:none; outline:none; display:inline-flex; align-items:center; justify-content:center; width:36px; height:36px; border-radius:10px; background:#FC5200; color:#fff; cursor:pointer; transition:transform .08s ease, box-shadow .15s ease, background-color .15s ease; flex:0 0 auto; }
.analyze-icon:hover { background:#ff7b4a; transform:scale(1.07); box-shadow:0 8px 24px rgba(252,82,0,.45); }
.analyze-icon:active { transform:scale(0.98); box-shadow:0 3px 10px rgba(252,82,0,.25); }

/* Highlight for selected route */
.activity-box.selected { border-color:#FC5200; background:rgba(252,82,0,.06); box-shadow:0 0 0 2px rgba(252,82,0,.12), 0 1px 6px rgba(0,0,0,.08); }

/* Loading spinner */
.spinner { width:18px; height:18px; animation:spin 1s linear infinite; }
@keyframes spin { from{ transform:rotate(0deg);} to{ transform:rotate(360deg);} }